{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/deama/OneDrive/Desktop/HospitalManagementApplication2/frontend/src/utils/api.ts"],"sourcesContent":["import axios from \"axios\";\r\n\r\nexport const api = axios.create({\r\n  baseURL: \"https://localhost:7058/api\", // âœ… MUST match your .NET API port\r\n});\r\n"],"names":[],"mappings":";;;AAAA;;AAEO,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IAC9B,SAAS;AACX","debugId":null}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/deama/OneDrive/Desktop/HospitalManagementApplication2/frontend/src/app/patients/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { api } from \"@/utils/api\";\r\nimport { Table, Button, Modal, Form, Input, message } from \"antd\";\r\nimport { FiEdit, FiTrash2 } from \"react-icons/fi\";\r\n\r\ninterface Patient {\r\n  patientId: number;\r\n  fullName: string;\r\n  gender: string;\r\n  birthDate: string;\r\n  phone: string;\r\n}\r\n\r\nexport default function PatientPage() {\r\n  const [patients, setPatients] = useState<Patient[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [open, setOpen] = useState(false);\r\n  const [editPatient, setEditPatient] = useState<Patient | null>(null);\r\n  const [form] = Form.useForm();\r\n\r\n  const fetchPatients = async () => {\r\n    try {\r\n      const res = await api.get(\"/patient\");\r\n      setPatients(res.data);\r\n    } catch (err) {\r\n      console.error(\"Error fetching patients\", err);\r\n      message.error(\"Failed to load patients\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchPatients();\r\n  }, []);\r\n\r\n  const onFinish = async (values: any) => {\r\n    const payload = {\r\n      ...values,\r\n      birthDate: new Date(values.birthDate).toISOString(), // convert to valid ISO format\r\n    };\r\n\r\n    try {\r\n      setLoading(true);\r\n\r\n      if (editPatient) {\r\n        await api.put(`/patient/${editPatient.patientId}`, payload);\r\n        message.success(\"Patient updated\");\r\n      } else {\r\n        await api.post(\"/patient\", payload);\r\n        message.success(\"Patient created\");\r\n      }\r\n\r\n      setOpen(false);\r\n      form.resetFields();\r\n      setEditPatient(null);\r\n      fetchPatients();\r\n    } catch (err) {\r\n      console.error(\"Error saving patient\", err);\r\n      message.error(\"Something went wrong while saving patient\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (patient: Patient) => {\r\n    setEditPatient(patient);\r\n    form.setFieldsValue({\r\n      ...patient,\r\n      birthDate: patient.birthDate.split(\"T\")[0], // trim to yyyy-mm-dd\r\n    });\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleDelete = async (id: number) => {\r\n    try {\r\n      await api.delete(`/patient/${id}`);\r\n      message.success(\"Patient deleted\");\r\n      fetchPatients();\r\n    } catch (err) {\r\n      console.error(\"Delete failed\", err);\r\n      message.error(\"Delete failed\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Patients</h1>\r\n\r\n      <Button\r\n        type=\"primary\"\r\n        style={{ marginBottom: 16 }}\r\n        onClick={() => {\r\n          setEditPatient(null);\r\n          form.resetFields();\r\n          setOpen(true);\r\n        }}\r\n      >\r\n        + Add Patient\r\n      </Button>\r\n\r\n      <Table\r\n        dataSource={patients}\r\n        rowKey=\"patientId\"\r\n        columns={[\r\n          { title: \"Full Name\", dataIndex: \"fullName\" },\r\n          { title: \"Gender\", dataIndex: \"gender\" },\r\n          { title: \"Birth Date\", dataIndex: \"birthDate\" },\r\n          { title: \"Phone\", dataIndex: \"phone\" },\r\n          {\r\n            title: \"Actions\",\r\n            render: (_, record) => (\r\n              <div style={{ display: \"flex\", gap: 8 }}>\r\n                <Button icon={<FiEdit />} onClick={() => handleEdit(record)} />\r\n                <Button\r\n                  icon={<FiTrash2 />}\r\n                  danger\r\n                  onClick={() => handleDelete(record.patientId)}\r\n                />\r\n              </div>\r\n            ),\r\n          },\r\n        ]}\r\n      />\r\n\r\n      <Modal\r\n        open={open}\r\n        title={editPatient ? \"Edit Patient\" : \"Add Patient\"}\r\n        onCancel={() => {\r\n          setOpen(false);\r\n          setEditPatient(null);\r\n        }}\r\n        onOk={() => form.submit()}\r\n        confirmLoading={loading}\r\n      >\r\n        <Form form={form} layout=\"vertical\" onFinish={onFinish}>\r\n          <Form.Item name=\"fullName\" label=\"Full Name\" rules={[{ required: true }]}>\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item name=\"gender\" label=\"Gender\" rules={[{ required: true }]}>\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"birthDate\"\r\n            label=\"Birth Date\"\r\n            rules={[{ required: true }]}\r\n          >\r\n            <Input placeholder=\"yyyy-mm-dd\" />\r\n          </Form.Item>\r\n          <Form.Item name=\"phone\" label=\"Phone\" rules={[{ required: true }]}>\r\n            <Input />\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}